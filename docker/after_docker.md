After Docker
========
[After Docker: Unikernels and Immutable Infrastructure — Medium](https://medium.com/@darrenrush/after-docker-unikernels-and-immutable-infrastructure-93d5a91c849e)

### 訳（そこまで自信無し）

DockerはDevOpsの世界を2歩前進させてくれると信じている。その理念・原則は先見の明があり極めて的確で、よりセキュアで、効率的で、そして未来のクラウド管理を容易にしてくれるだろう

しかしながら、Immutable ServersとUnikernelsを活用する別のアプローチを取れば、既存ビジネスによりシンプルに適応する形で、小さく・管理が容易で・セキュアなコンテナを実現できるだろう


### Next Cloud
DevOpsが成熟するにつれ、クラウドアプリケーションの管理とデプロイの欠点がより鮮明になってきている。

仮想マシンイメージの肥大化、攻撃対象領域の拡大、レガシーな実行形式、ベースOSの断片化、クラウドデプロイに関する開発部門・IT部門間での責任の不明確さ、これらは全て大きな摩擦を引き起こしている

これらの問題に関する具体例が1つある

RubyやPythonのWebサーバ向け仮想マシンイメージを、ビルドツール(gcc)・SSH・シェル実行環境を含まずに作成することは事実上不可能なままである。

gccやSSHといったコンポーネントは、マシンイメージサイズ・攻撃対象領域・メンテナンスのオーバーヘッドを増大させるもので、本番環境にはふさわしくない。

Dockerにしても、現在のアプローチにはいくつかの問題点がある
* ベースとなるOSの断片化 - あなたのDockerイメージはCentOS,Debian,Ubuntu,どれを基にすべきか？"標準アプリケーション"が、あなたが選択したOS向けのDockerでサポートされているだろうか？もし自身で全てのイメージのメンテナンスを行わなければならなくなった場合、あなたのチームにその力はあるだろうか？
* イメージサイズの肥大化 - Dockerのイメージは巨大だ。フルVMイメージ程ではないが、リモートに高速に転送するには難しいサイズだ。TinyCoreやNixOSのようなより小さなLinuxを使用すれば、カスタムLinuxイメージをビルドするなどしてこの問題に対処可能ではあるが、まだDockerコミュニティ内で使われ始めたばかりの方法だ。
* まだセキュアとは言えない - publicリポジトリに存在するほとんどの"ポピュラーな"dockerイメージは、bashからpythonまで実行可能なバイナリ・実行環境の動物園状態で、それらは巧妙なセキュリティ・ホール攻撃によってアクセス可能だ。

「いやちょっと待った！」とあなたは言うかもしれない。「CoreOSならDocker向けに小さく・そして最適化されているじゃないか」。事実、CoreOSはDockerインスタンスの管理やオーケストレーションの為に設計されたプラットフォームだ。DockerコンテナのベースOSイメージとして利用されることは想定していない。具体的に言うと、CoreOSのベースはChrome OSで、Dockerイメージのベースとして推奨されているのはDebianだ。CoreOSとDockerについて学んでいる最中は、これが私にとっては混乱の元だった -- 他所でも見られるように -- 。 これらのウリについて多くの説明を保証する(?)


### Immutable servers & Unikernels
もしあなたがこの世界に膝までどっぷり浸かっているなら、2つのキーコンセプトに精通し、これらのコンセプトを念頭に置いてoperational systemを設計すべきだ

__Immutable Servers__ は、本番システム上でのアプリケーションアップデート・セキュリティパッチ・設定変更が発生しない事を要求する開発モデルだ。もしこれらのレイヤーで変更が必要なったら、本番環境内では新しいイメージが構築され、pushされ、サイクルされる。HerokuはImmutable Serversに取り組んでいる好例だ : アプリケーションのすべての変更には、'git push' による既存バージョンの上書きが必要である。このアプローチの利点は、本番環境で実行中のコードの高い信頼性・開発ワークフロー内での統合テスト・システムが危険に晒されていない事への検証可能性、を含んでいることだ。

ひとたびあなたがImmutable Serversのコンセプトの信奉者になれば、デプロイのスピードup・脆弱性の最小化が目標になる。コンテナは 1コンテナ1サービス(マイクロサービス) の考えを促進し、Unikernelsはこの考えをさらに押し進める

Unikernelsはアプリケーションコードのコンパイル・リンクのみならず、オペレーティングシステムを含めることまで可能だ。例えば、アプリケーションが永続化を必要としないのであれば、デバイスドライバやディスクアクセスに関するOSの機能を本番用イメージに含めることすら不要になるだろう。UnikernelsはXenのようなハイパーバイザ上で実行するよう設計されているので、ネットワークや永続化のような標準リソース向けのインタフェースだけを必要とする。何千ものディスプレイ・ディスク・ネットワークカードは完全に不要だ。本番システムは必要最低限のものになる - アプリケーションコード・実行環境・アプリケーションが必要とするOS機能、これらのみに。正味の効果は、メンテナンスが容易で高速にデプロイ可能な、場所を取らない小さなVMイメージだ。

同僚のKevin Goslarは、伝統的なOS（Linux, Windows）はサーバ上からいなくなるだろう、と示唆している。長年複数のユーザーに作られ続けてきたハードウェア非依存のコードのゴミは、シングルユーザーで・特定のハードウェアに最適化されたベアメタル・ハイパーバイザ に置き換えられるだろう。

これらの技術で構成され十分に成長したビルド・デプロイ管理ツール群が、ホストやエンタープライズクラウドの分野にとって真の変革をもたらすだろう。
